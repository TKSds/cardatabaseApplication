{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\carfront\\\\src\\\\components\\\\Login.js\";\nimport React, { Component } from \"react\";\nimport { SERVER_URL } from \"../constants.js\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Carlist from \"./Carlist\";\nimport { BrowserRouter, Switch, Route, Link } from \"react-router-dom\";\nimport SecuredRoute from \"./SecuredRoute\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.handleClose = event => {\n      this.setState({\n        open: false\n      });\n    };\n\n    this.login = () => {\n      const user = {\n        username: this.state.username,\n        password: this.state.password\n      };\n      fetch(SERVER_URL + \"login\", {\n        method: \"POST\",\n        body: JSON.stringify(user)\n      }).then(res => {\n        const jwtToken = res.headers.get(\"Authorization\");\n\n        if (jwtToken !== null) {\n          sessionStorage.setItem(\"jwt\", jwtToken);\n          this.setState({\n            isAuthenticated: true\n          });\n        } else {\n          this.setState({\n            open: true\n          });\n        }\n      }).catch(err => console.error(err));\n    };\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      isAuthenticated: false,\n      open: false\n    };\n  }\n\n  render() {\n    if (this.state.isAuthenticated === true) {\n      return React.createElement(Carlist, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        name: \"username\",\n        placeholder: \"Username\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Password\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Login\"), React.createElement(Snackbar, {\n        open: this.state.open,\n        onClose: this.handleClose,\n        autoHideDuration: 1500,\n        message: \"Check your username and password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(BrowserRouter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(SecuredRoute, {\n        isAuthenticated: this.state.isAuthenticated,\n        path: \"/shop\",\n        component: Login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }))));\n    }\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["D:\\projects\\carfront\\src\\components\\Login.js"],"names":["React","Component","SERVER_URL","TextField","Button","Snackbar","Carlist","BrowserRouter","Switch","Route","Link","SecuredRoute","Login","constructor","props","handleChange","event","setState","target","name","value","handleClose","open","login","user","username","state","password","fetch","method","body","JSON","stringify","then","res","jwtToken","headers","get","sessionStorage","setItem","isAuthenticated","catch","err","console","error","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { SERVER_URL } from \"../constants.js\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport Carlist from \"./Carlist\";\r\nimport { BrowserRouter, Switch, Route, Link } from \"react-router-dom\";\r\nimport SecuredRoute from \"./SecuredRoute\";\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\",\r\n      isAuthenticated: false,\r\n      open: false\r\n    };\r\n  }\r\n\r\n  handleChange = event => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  handleClose = event => {\r\n    this.setState({ open: false });\r\n  };\r\n\r\n  login = () => {\r\n    const user = {\r\n      username: this.state.username,\r\n      password: this.state.password\r\n    };\r\n    fetch(SERVER_URL + \"login\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(user)\r\n    })\r\n      .then(res => {\r\n        const jwtToken = res.headers.get(\"Authorization\");\r\n        if (jwtToken !== null) {\r\n          sessionStorage.setItem(\"jwt\", jwtToken);\r\n          this.setState({ isAuthenticated: true });\r\n        } else {\r\n          this.setState({ open: true });\r\n        }\r\n      })\r\n      .catch(err => console.error(err));\r\n  };\r\n\r\n  render() {\r\n    if (this.state.isAuthenticated === true) {\r\n      return <Carlist />;\r\n    } else {\r\n      return (\r\n        <div>\r\n          <TextField\r\n            name=\"username\"\r\n            placeholder=\"Username\"\r\n            onChange={this.handleChange}\r\n          />\r\n          <br />\r\n          <TextField\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"Password\"\r\n            onChange={this.handleChange}\r\n          />\r\n          <br />\r\n          <br />\r\n          <Button variant=\"contained\" color=\"primary\" onClick={this.login}>\r\n            Login\r\n          </Button>\r\n          <Snackbar\r\n            open={this.state.open}\r\n            onClose={this.handleClose}\r\n            autoHideDuration={1500}\r\n            message=\"Check your username and password\"\r\n          />\r\n\r\n          <BrowserRouter>\r\n            <Switch>\r\n              <SecuredRoute\r\n                isAuthenticated={this.state.isAuthenticated}\r\n                path=\"/shop\"\r\n                component={Login}\r\n              />\r\n            </Switch>\r\n          </BrowserRouter>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}