{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\carfront\\\\src\\\\components\\\\Login.js\";\nimport React, { Component } from \"react\";\nimport { SERVER_URL } from \"../constants.js\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Carlist from \"./Carlist\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.login = () => {\n      const user = {\n        username: this.state.username,\n        password: this.state.password\n      };\n      fetch(SERVER_URL + \"login\", {\n        method: \"POST\",\n        body: JSON.stringify(user)\n      }).then(res => {\n        const jwtToken = res.headers.get(\"Authorization\");\n\n        if (jwtToken !== null) {\n          sessionStorage.setItem(\"jwt\", jwtToken);\n          this.setState({\n            isAuthenticated: true\n          });\n        }\n      }).catch(err => console.error(err));\n    };\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      isAuthenticated: false\n    };\n  }\n\n  render() {\n    if (this.state.isAuthenticated === true) {\n      return React.createElement(Carlist, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        name: \"username\",\n        placeholder: \"Username\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Password\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"Login\"));\n    }\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["D:\\projects\\carfront\\src\\components\\Login.js"],"names":["React","Component","SERVER_URL","TextField","Button","Carlist","Login","constructor","props","handleChange","event","setState","target","name","value","login","user","username","state","password","fetch","method","body","JSON","stringify","then","res","jwtToken","headers","get","sessionStorage","setItem","isAuthenticated","catch","err","console","error","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,MAAMC,KAAN,SAAoBL,SAApB,CAA8B;AAC5BM,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAKnBC,YALmB,GAKJC,KAAK,IAAI;AACtB,WAAKC,QAAL,CAAc;AAAE,SAACD,KAAK,CAACE,MAAN,CAAaC,IAAd,GAAqBH,KAAK,CAACE,MAAN,CAAaE;AAApC,OAAd;AACD,KAPkB;;AAAA,SASnBC,KATmB,GASX,MAAM;AACZ,YAAMC,IAAI,GAAG;AACXC,QAAAA,QAAQ,EAAE,KAAKC,KAAL,CAAWD,QADV;AAEXE,QAAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWC;AAFV,OAAb;AAIAC,MAAAA,KAAK,CAAClB,UAAU,GAAG,OAAd,EAAuB;AAC1BmB,QAAAA,MAAM,EAAE,MADkB;AAE1BC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,IAAf;AAFoB,OAAvB,CAAL,CAIGS,IAJH,CAIQC,GAAG,IAAI;AACX,cAAMC,QAAQ,GAAGD,GAAG,CAACE,OAAJ,CAAYC,GAAZ,CAAgB,eAAhB,CAAjB;;AACA,YAAIF,QAAQ,KAAK,IAAjB,EAAuB;AACrBG,UAAAA,cAAc,CAACC,OAAf,CAAuB,KAAvB,EAA8BJ,QAA9B;AACA,eAAKhB,QAAL,CAAc;AAAEqB,YAAAA,eAAe,EAAE;AAAnB,WAAd;AACD;AACF,OAVH,EAWGC,KAXH,CAWSC,GAAG,IAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAXhB;AAYD,KA1BkB;;AAEjB,SAAKhB,KAAL,GAAa;AAAED,MAAAA,QAAQ,EAAE,EAAZ;AAAgBE,MAAAA,QAAQ,EAAE,EAA1B;AAA8Ba,MAAAA,eAAe,EAAE;AAA/C,KAAb;AACD;;AAyBDK,EAAAA,MAAM,GAAG;AACP,QAAI,KAAKnB,KAAL,CAAWc,eAAX,KAA+B,IAAnC,EAAyC;AACvC,aAAO,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KAFD,MAEO;AACL,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AACE,QAAA,IAAI,EAAC,UADP;AAEE,QAAA,WAAW,EAAC,UAFd;AAGE,QAAA,QAAQ,EAAE,KAAKvB,YAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANF,EAOE,oBAAC,SAAD;AACE,QAAA,IAAI,EAAC,UADP;AAEE,QAAA,IAAI,EAAC,UAFP;AAGE,QAAA,WAAW,EAAC,UAHd;AAIE,QAAA,QAAQ,EAAE,KAAKA,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPF,EAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbF,EAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdF,EAeE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,WAAhB;AAA4B,QAAA,KAAK,EAAC,SAAlC;AAA4C,QAAA,OAAO,EAAE,KAAKM,KAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAfF,CADF;AAqBD;AACF;;AAvD2B;;AA0D9B,eAAeT,KAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport { SERVER_URL } from \"../constants.js\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Carlist from \"./Carlist\";\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { username: \"\", password: \"\", isAuthenticated: false };\r\n  }\r\n\r\n  handleChange = event => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  login = () => {\r\n    const user = {\r\n      username: this.state.username,\r\n      password: this.state.password\r\n    };\r\n    fetch(SERVER_URL + \"login\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(user)\r\n    })\r\n      .then(res => {\r\n        const jwtToken = res.headers.get(\"Authorization\");\r\n        if (jwtToken !== null) {\r\n          sessionStorage.setItem(\"jwt\", jwtToken);\r\n          this.setState({ isAuthenticated: true });\r\n        }\r\n      })\r\n      .catch(err => console.error(err));\r\n  };\r\n\r\n  render() {\r\n    if (this.state.isAuthenticated === true) {\r\n      return <Carlist />;\r\n    } else {\r\n      return (\r\n        <div>\r\n          <TextField\r\n            name=\"username\"\r\n            placeholder=\"Username\"\r\n            onChange={this.handleChange}\r\n          />\r\n          <br />\r\n          <TextField\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"Password\"\r\n            onChange={this.handleChange}\r\n          />\r\n          <br />\r\n          <br />\r\n          <Button variant=\"contained\" color=\"primary\" onClick={this.login}>\r\n            Login\r\n          </Button>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}